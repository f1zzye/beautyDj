{% extends 'partials/base.html' %}
{% load static %}
{% block content %}

<div class="l-inner">
    <div class="woocommerce-notices-wrapper woocommerce-notices-wrapper--ajax" style="transform: translateY(0px);"></div>

    <div class="l-section l-section--container l-section--bottom-margin l-section--no-sidebar l-section--top-margin-60 l-section--white">
        <div class="l-section__content">
            <div class="woocommerce">
                <div class="c-account">
                    <div class="c-account__col-menu">
                        <nav>
                            <ul class="c-account__navigation">
                                <li class="c-account__navigation-item is-active" data-tab="profile">
                                    <a class="c-account__navigation-link">
                                        Профіль </a>
                                </li>
                                <li class="c-account__navigation-item" data-tab="orders">
                                    <a class="c-account__navigation-link">
                                        Замовлення </a>
                                </li>
                            </ul>
                        </nav>
                    </div>

                    <div class="c-account__col-content">
                        <!-- Таб профиля -->
                        <div class="tab-content active" id="profile">
                            <div class="account-header">
                                <div class="user-info">
                                    <div class="user-avatar">
                                        <img src="{% static 'imgs/defaultuser.jpg' %}" alt="User avatar">
                                    </div>
                                    <div class="user-details">
                                        <h2>Доброго дня, f1zzye!</h2>
                                        <span class="user-balance">ㅤ</span>
                                    </div>
                                </div>
                                <div class="user-actions">
                                    <a href="#" class="action-button">
                                        <i class="fas fa-cog"></i>
                                        Налаштування
                                    </a>
                                    <a href="{% url 'userauths:sign-out' %}" class="action-button">
                                        <i class="fas fa-sign-out"></i>
                                        Вийти
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- Таб заказов -->
                        <div class="tab-content" id="orders">
                            <table class="woocommerce-orders-table woocommerce-MyAccount-orders shop_table shop_table_responsive my_account_orders account-orders-table">
                                <thead>
                                    <tr>
                                        <th class="woocommerce-orders-table__header woocommerce-orders-table__header-order-number"><span class="nobr">Замовлення</span></th>
                                        <th class="woocommerce-orders-table__header woocommerce-orders-table__header-order-date"><span class="nobr">Дата</span></th>
                                        <th class="woocommerce-orders-table__header woocommerce-orders-table__header-order-status"><span class="nobr">Статус</span></th>
                                        <th class="woocommerce-orders-table__header woocommerce-orders-table__header-order-check"><span class="nobr">Успішна оплата</span></th>
                                        <th class="woocommerce-orders-table__header woocommerce-orders-table__header-order-total"><span class="nobr">Загалом</span></th>
                                        <th class="woocommerce-orders-table__header woocommerce-orders-table__header-order-actions"><span class="nobr">Дії</span></th>
                                    </tr>
                                </thead>
                                <tbody>
                                {% for order in orders %}
                                    <tr>
                                        <td data-title="Замовлення">#{{ order.id }}</td>
                                        <td data-title="Дата">{{ order.order_date|date:"d-m-Y"}}</td>
                                        <td data-title="Статус"><span class="order-status processing">{{ order.product_status|title }}</span></td>
                                        {% if order.paid_status == True %}
                                            <td data-title="Перевірка"><i class="fas fa-check-circle status-icon success"></i></td>
                                        {% else %}
                                            <td data-title="Перевірка"><i class="fas fa-times-circle status-icon text-danger"></i></td>
                                        {% endif %}
                                        <td data-title="Загалом"><span class="woocommerce-Price-amount">{{ order.price }}&nbsp;₴</span></td>
                                        <td data-title="Дії"><a href="/dashboard/order/164" class="woocommerce-button button view">Перегляд</a></td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>

/* Основные стили */
.c-account__col-content {
    padding: 30px;
}

/* Шапка аккаунта */
.account-header {
    background: #fff;
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Информация о пользователе */
.user-info {
    display: flex;
    align-items: center;
    gap: 20px;
}

.user-avatar {
    flex-shrink: 0;
    width: 100px;
    height: 100px;
    border-radius: 50%;
    overflow: hidden;
    border: 2px dashed #000;
    padding: 3px;
}

.user-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
}

.user-details h2 {
    margin: 0 0 10px 0;
    font-size: 24px;
    color: #000;
    font-weight: 500;
}

.user-balance {
    color: #666;
    font-size: 16px;
}

/* Кнопки действий */
.user-actions {
    display: flex;
    gap: 15px;
}

.action-button {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 15px;
    border: 1px solid #000;
    border-radius: 5px;
    color: #000;
    text-decoration: none;
    transition: all 0.3s ease;
}

/* Специальный стиль для кнопки выхода */
.action-button:last-child {
    border-color: #ff0000;
    color: #ff0000;
}

.action-button:hover {
    background: #000;
    color: #fff;
}

/* Специальный стиль для ховера кнопки выхода */
.action-button:last-child:hover {
    background: #ff0000;
    border-color: #ff0000;
    color: #fff;
}

/* Анимация при наведении на аватар */
.user-avatar:hover {
    transform: scale(1.05);
    transition: transform 0.3s ease;
}

/* Навигация */
.c-account__navigation {
    list-style: none;
    padding: 0;
    margin: 0;
}

.c-account__navigation-item {
    margin-bottom: 10px;
}

.c-account__navigation-link {
    display: block;
    padding: 10px 15px;
    color: #000;
    text-decoration: none;
    border-radius: 5px;
    transition: all 0.3s ease;
    cursor: pointer;
}

.c-account__navigation-item.is-active .c-account__navigation-link {
    background: #000;
    color: #fff;
}

.c-account__navigation-link:hover {
    background: #f5f5f5;
}

/* Стили для табов */
.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}

/* Стили для таблицы заказов */
.woocommerce-orders-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    background: #fff;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.woocommerce-orders-table th,
.woocommerce-orders-table td {
    padding: 15px;
    text-align: left;
    border-bottom: 1px solid #eee;
}

.woocommerce-orders-table th {
    background-color: #f8f8f8;
    font-weight: 500;
    color: #000;
}

.woocommerce-orders-table tbody tr:hover {
    background-color: #f8f8f8;
}

.woocommerce-button.button.view {
    display: inline-block;
    padding: 8px 15px;
    border: 1px solid #000;
    border-radius: 5px;
    color: #000;
    text-decoration: none;
    transition: all 0.3s ease;
}

.woocommerce-button.button.view:hover {
    background: #000;
    color: #fff;
}

/* Адаптивность */
@media (max-width: 768px) {
    /* Стили для контейнера контента */
    .l-section__content {
        padding: 0;
    }

    .c-account {
        padding: 0;
    }

    .c-account__col-content {
        padding: 0;
    }

    /* Стили для таблицы заказов */
    .woocommerce-orders-table {
        margin: 0;
        width: 100%;
        border-radius: 0;
        box-shadow: none;
    }

    .woocommerce-orders-table thead {
        display: none;
    }

    .woocommerce-orders-table tbody tr {
        display: block;
        margin-bottom: 15px;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .woocommerce-orders-table td {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px;
        border-bottom: 1px solid #eee;
        font-size: 14px;
    }

    /* Стили для номера заказа */
    .woocommerce-orders-table td[data-title="Замовлення"] {
        background: #f8f8f8;
        border-radius: 8px 8px 0 0;
        font-size: 16px;
        font-weight: 600;
    }

    /* Стили для статуса */
    .woocommerce-orders-table td[data-title="Статус"] {
        padding: 12px;
    }

    .order-status {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        white-space: nowrap;
    }

    /* Стили для иконки проверки */
    .status-icon.success {
        font-size: 18px;
    }

    .status-icon.text-danger {
        font-size: 18px;
    }

    /* Стили для цены */
    .woocommerce-Price-amount {
        font-weight: 600;
        font-size: 14px;
    }

    /* Стили для кнопки просмотра */
    .woocommerce-orders-table td[data-title="Дії"] {
        border-bottom: none;
        border-radius: 0 0 8px 8px;
        background: #f8f8f8;
    }

    .woocommerce-button.button.view {
        padding: 6px 12px;
        font-size: 13px;
        min-width: 80px;
        text-align: center;
    }

    /* Заголовки в мобильной версии */
    .woocommerce-orders-table td:before {
        content: attr(data-title);
        font-weight: 500;
        color: #666;
        font-size: 13px;
    }

    /* Стили для шапки аккаунта */
    .account-header {
        flex-direction: column;
        gap: 20px;
        text-align: center;
        margin: 0 15px 15px;
        border-radius: 8px;
        padding: 20px;
    }

    .user-info {
        flex-direction: column;
    }

    .user-actions {
        flex-direction: column;
        width: 100%;
    }

    .action-button {
        justify-content: center;
    }

    /* Стили для табов */
    .tab-content {
        padding: 0;
    }

    /* Стили для заказов */
    #orders {
        padding: 15px;
    }
}

/* Планшеты (портретная и ландшафтная ориентация) */
@media (min-width: 769px) and (max-width: 1024px) {
    /* Основной контейнер */
    .c-account {
        flex-direction: column;
        padding: 0 20px;
    }

    /* Навигационное меню */
    .c-account__col-menu {
        width: 100%;
        margin-bottom: 30px;
    }

    .c-account__navigation {
        display: flex;
        justify-content: center; /* Центрирование элементов */
        gap: 15px;
        padding-bottom: 10px;
    }

    .c-account__navigation-item {
        margin-bottom: 0;
        flex: 1; /* Равное распределение пространства */
        max-width: 200px; /* Максимальная ширина элемента */
    }

    .c-account__navigation-link {
        text-align: center;
        width: 100%;
        white-space: nowrap;
    }

    /* Шапка профиля */
    .account-header {
        flex-direction: column;
        gap: 25px;
        padding: 20px;
        align-items: center; /* Центрирование содержимого */
    }

    .user-info {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    .user-avatar {
        width: 80px;
        height: 80px;
    }

    .user-details h2 {
        font-size: 22px;
    }

    /* Кнопки действий */
    .user-actions {
        display: flex;
        flex-direction: column; /* Кнопки друг под другом */
        align-items: center; /* Центрирование кнопок */
        width: 100%;
        gap: 10px;
    }

    .action-button {
        padding: 8px 12px;
        font-size: 14px;
        width: 200px; /* Фиксированная ширина кнопок */
        justify-content: center;
    }

    /* Адаптация контента */
    .c-account__col-content {
        padding: 20px;
    }

    /* Таблица заказов */
    .woocommerce-orders-table {
        font-size: 14px;
    }

    .woocommerce-orders-table th,
    .woocommerce-orders-table td {
        padding: 12px;
    }

    /* Скрытие ненужных элементов */
    .woocommerce-orders-table th:nth-child(4),
    .woocommerce-orders-table td:nth-child(4),
    .woocommerce-orders-table__header-order-check {
        display: none;
    }
}

/* Планшеты в портретной ориентации */
@media (min-width: 769px) and (max-width: 1024px) and (orientation: portrait) {
    .user-info {
        flex-direction: column;
        text-align: center;
    }

    .c-account__navigation {
        justify-content: center;
        flex-wrap: wrap; /* Разрешаем перенос элементов */
    }

    .c-account__navigation-item {
        flex: 1 1 auto; /* Автоматическое распределение пространства */
        min-width: 200px; /* Минимальная ширина элемента */
    }
}

/* Дополнительные стили для очень маленьких экранов */
@media (max-width: 360px) {
    .woocommerce-orders-table td {
        padding: 10px;
        font-size: 13px;
    }

    .woocommerce-orders-table td:before {
        font-size: 12px;
    }

    .order-status {
        padding: 3px 6px;
        font-size: 11px;
    }

    .woocommerce-button.button.view {
        padding: 5px 10px;
        font-size: 12px;
    }
}

/* Дополнительные медиа-запросы для очень маленьких экранов */
@media (max-width: 480px) {
    .user-avatar {
        width: 80px;
        height: 80px;
    }

    .user-details h2 {
        font-size: 20px;
    }

    .user-balance {
        font-size: 14px;
    }

    .action-button {
        font-size: 14px;
        padding: 6px 12px;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const navItems = document.querySelectorAll('.c-account__navigation-item');
    const tabContents = document.querySelectorAll('.tab-content');

    navItems.forEach(item => {
        item.addEventListener('click', function() {
            // Удаляем активный класс у всех пунктов навигации
            navItems.forEach(nav => nav.classList.remove('is-active'));
            // Добавляем активный класс текущему пункту
            this.classList.add('is-active');

            // Скрываем все табы
            tabContents.forEach(tab => tab.classList.remove('active'));
            // Показываем нужный таб
            const tabId = this.getAttribute('data-tab');
            document.getElementById(tabId).classList.add('active');
        });
    });
});
</script>

{% endblock %}